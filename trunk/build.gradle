usePlugin('groovy')
usePlugin('maven')

group = 'com.pietschy.gradle'
version = '0.8-4-SNAPSHOT'

// currently builds with Gradle 0.8
gradleHome = System.getenv()['GRADLE_HOME']

configurations {
  // add support for uploading using ftp
  deployerJars
}

dependencies {
  groovy fileTree(dir: "$gradleHome/lib", includes: ['*.jar'])

  deployerJars('org.apache.maven.wagon:wagon-ftp:1.0-beta-2')
}

uploadArchives {
  repositories.mavenDeployer {
    name = 'ftpDeployer' // optional
    configuration = configurations.deployerJars

    repository(url: MAVEN_REPOSITORY_URL) {
      authentication(userName: MAVEN_USERNAME, password: MAVEN_PASSWORD)
    }

    snapshotRepository(url: MAVEN_SNAPSHOT_URL) {
      authentication(userName: MAVEN_USERNAME, password: MAVEN_PASSWORD)
    }
  }
}
